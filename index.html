<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image Carousel</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .slider {
            display: flex;
            overflow-x: scroll; /* 更自然的滑动体验 */
            -webkit-overflow-scrolling: touch; /* 为iOS设备提供流畅的滚动 */
            scroll-behavior: smooth; /* 平滑滚动 */
            width: 100vw;
            height: 100vh;
        }

        .slider img {
            width: 100vw; /* 适应视口宽度 */
            max-height: 100vh; /* 确保图片高度不超过视口高度 */
            object-fit: contain; /* 保证图片完整显示而不裁剪 */
            opacity: 0; /* 初始时隐藏图片，直到它们加载完成 */
            transition: opacity 0.5s ease-out; /* 平滑显示图片 */
        }
    </style>
</head>
<body>

<div class="slider" id="slider">
    <!-- 使用data-src代替src属性实现懒加载 -->
    <img data-src="image1.jpg" alt="Image 1">
    <img data-src="image2.jpg" alt="Image 2">
    <img data-src="image3.jpg" alt="Image 3">
    <img data-src="image4.jpg" alt="Image 4">
    <img data-src="image5.jpg" alt="Image 5">
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const slider = document.getElementById('slider');
    let isDown = false;
    let startX;
    let scrollLeft;

    function loadImages() {
        const imgs = slider.querySelectorAll('img[data-src]');
        const sliderRect = slider.getBoundingClientRect();
        imgs.forEach(img => {
            const imgRect = img.getBoundingClientRect();
            if (imgRect.left < sliderRect.width) { // 如果图片即将进入可视区域，则加载它
                img.src = img.getAttribute('data-src');
                img.removeAttribute('data-src');
                img.onload = () => img.style.opacity = 1; // 图片加载完成后显示
            }
        });
    }

    function handleDragStart(e) {
        isDown = true;
        startX = e.pageX || e.touches[0].pageX - slider.offsetLeft;
        scrollLeft = slider.scrollLeft;
        slider.classList.add('active');
    }

    function handleDragEnd() {
        isDown = false;
        slider.classList.remove('active');
    }

    function handleDragMove(e) {
        if (!isDown) return;
        e.preventDefault();
        const x = e.pageX || e.touches[0].pageX - slider.offsetLeft;
        const walk = (x - startX); 
        slider.scrollLeft = scrollLeft - walk;
    }

    // 初始化图片加载
    loadImages();
    // 监听滚动事件以懒加载图片
    slider.addEventListener('scroll', loadImages);

    // 绑定事件处理程序
    ['mousedown', 'touchstart'].forEach(evt => slider.addEventListener(evt, handleDragStart));
    ['mouseleave', 'mouseup', 'touchend'].forEach(evt => slider.addEventListener(evt, handleDragEnd));
    ['mousemove', 'touchmove'].forEach(evt => slider.addEventListener(evt, handleDragMove));
});
</script>
</body>
</html>

